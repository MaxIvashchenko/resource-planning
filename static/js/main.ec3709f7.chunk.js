(this["webpackJsonpresource-planning"]=this["webpackJsonpresource-planning"]||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/plus.c767ee98.svg"},156:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),c=a.n(o),i=(a(77),a(78),a(29)),s=a(30),l=a(41),d=a(40),u=a(6),m=a(10),p=a.n(m),h=a(21),f=a.n(h);a(57);function b(e){var t=e.day,a=e.daysNumber;return r.a.createElement("div",{className:"day",style:{width:"".concat(100/a,"%")}},r.a.createElement("p",null,t.date),r.a.createElement("p",null,t.weekDay))}var g=a(66),v=a.n(g),y=a(32),E=a.n(y);var k=function(e){var t=e.nameOfClass,a=e.handler;return r.a.createElement("div",{className:t},r.a.createElement("button",{onClick:function(){return a(!1)}},r.a.createElement("img",{src:E.a,alt:"button-icon"})),e.children,r.a.createElement("button",{onClick:function(){return a(!0)}},r.a.createElement("img",{src:v.a,alt:"button-icon"})))},j=a(67);var w=function(e){var t=e.i,a=e.month,n=e.daysNumber;return r.a.createElement("div",{className:0===t?"month":"month borderLine",style:{width:"".concat(100/n*a.sum,"%")}},a.month)};var D=Object(j.withSize)()((function(e){var t=e.monthsView,a=e.getRowWidth,o=e.daysNumber,c=e.size;Object(n.useEffect)((function(){a(c.width)}),[a,c.width]);var i=t.map((function(e,t){return r.a.createElement(w,{i:t,key:"month-"+e.month+"-"+t,month:e,daysNumber:o})}));return r.a.createElement("div",{className:"months"},i)}));var O=function(e){var t=e.getDaysInRow,a=e.getRowWidth,o=Object(n.useState)(5),c=Object(u.a)(o,2),i=c[0],s=c[1],l=Object(n.useState)([]),d=Object(u.a)(l,2),m=d[0],h=d[1],g=Object(n.useState)([]),v=Object(u.a)(g,2),y=v[0],E=v[1],j=Object(n.useState)((new Date).getTime()),w=Object(u.a)(j,2),O=w[0],S=w[1],N=Object(n.useState)((new Date).setDate((new Date).getDate()+i)),I=Object(u.a)(N,2),M=I[0],x=I[1];return Object(n.useEffect)((function(){var e=Math.round((M-O)/864e5),a=e>21?21:e;0!==a&&s(a);for(var n=[],r=0;r<a+1;r++){var o=p()(O).add(1*r,"day").format("dd"),c=p()(O).add(1*r,"day").date(),i=p()(O).add(1*r,"day").format("MMMM"),l=p()(O).add(1*r,"day").year();n.push({id:o+"-"+c+"-"+i,weekDay:o,date:c,month:i,year:l,projects:{}})}var d=n.reduce((function(e,t){return e[t.month]=(e[t.month]||0)+1,e}),{}),u=Object.keys(d).map((function(e){return{month:e,sum:d[e]}}));h(n),E(u),t(n)}),[O,M,i,t]),r.a.createElement("div",{className:"DatePickerHeader container-fluid"},r.a.createElement("div",{className:"picker"},r.a.createElement("div",{className:"calendar"},r.a.createElement("div",{className:"dates"},r.a.createElement(f.a,{selected:O,onChange:function(e){return S(e.getTime())},selectsStart:!0,startDate:O,endDate:M,dateFormat:"MMMM d, yyyy"}),r.a.createElement(f.a,{selected:M>O?M:O,onChange:function(e){return x(e.getTime())},selectsEnd:!0,startDate:O,endDate:M,minDate:O,dateFormat:"MMMM d, yyyy"}),r.a.createElement("button",{id:"clearButton",onClick:function(){return S((new Date).getTime()),void x((new Date).setDate((new Date).getDate()+14))}},"Clear")))),r.a.createElement("div",{className:"datesShow"},r.a.createElement(k,{handler:function(e){var t,a;e?(t=p()(O).add(1,"month").format("x"),a=p()(M).add(1,"month").format("x")):(t=p()(O).subtract(1,"month").format("x"),a=p()(M).subtract(1,"month").format("x")),S(+t),x(+a)},nameOfClass:"months"},r.a.createElement(D,{monthsView:y,getRowWidth:a,daysNumber:i})),r.a.createElement(k,{handler:function(e){e?(S(O+864e5),x(M+864e5)):(S(O-864e5),x(M-864e5))},nameOfClass:"days"},m.map((function(e){return r.a.createElement(b,{key:"headerDate-"+e.date+"-"+e.i,day:e,daysNumber:i})})))))};function S(e){var t=e.index,a=e.cellWidth,n=t+1;return console.log("rerender Lines"),r.a.createElement("div",{className:"svgLines",style:{right:"".concat(a*n+20,"px")}},r.a.createElement("svg",{width:"1px",height:"100%",version:"1.1"},r.a.createElement("line",{x1:"0",y1:"100%",stroke:"black",fill:"transparent",strokeDasharray:"4",strokeWidth:"1"}),r.a.createElement("line",{x1:"100%",y1:"100%",stroke:"black",fill:"transparent",strokeDasharray:"4",strokeWidth:"1"})))}var N=a(26),I=a(55),M=a(7),x=a(37);function P(e){var t=e.departament,a=e.departamentID,n=e.toggler;return r.a.createElement("div",{className:"departmentTitle",key:"key-"+t.name+"-"+a},r.a.createElement("h5",null,t.departamentName),r.a.createElement("button",{onClick:function(){return n(a)},className:"departmentBtn"},r.a.createElement("img",{className:t.show?"show":"hide",src:E.a,alt:"arrow icon"})))}var W=a(38),A=a.n(W),C=a(14),R=a.n(C),L=a(70),q=a.n(L),H=a(71),Y=a.n(H);function B(e){var t=e.piece,a=e.cellWidth,o=e.pieceIndex,c=e.rowIndex,i=e.departamentID,s=(e.setSomeData,e.board,e.deleteProject),l=e.getInnerProjectOffset,d=a||1,m=(A()(),t.positionX*d),p=(document.querySelectorAll(".handlers"),document.querySelectorAll(".resizer"),Object(n.useState)(0)),h=Object(u.a)(p,2),f=h[0],b=h[1],g=Object(n.useState)(),v=Object(u.a)(g,2),y=v[0],E=v[1],k=Object(n.useState)(),j=Object(u.a)(k,2),w=(j[0],j[1]),D=Object(n.useState)(!1),O=Object(u.a)(D,2),S=O[0],N=O[1],I=Object(n.useState)(!1),M=Object(u.a)(I,2),P=M[0],W=M[1];return t?r.a.createElement(x.Draggable,{id:"".concat(t.id,"-dragger"),className:"handlers",style:{overflow:"visible",position:"absolute",left:m,width:d*t.duration,top:"".concat(34*t.positionY,"px")}},r.a.createElement("div",{className:" ".concat(t.type)},r.a.createElement("button",{onClick:function(e){return function(e,t){w(""),b(e.clientX),E(e.clientY),w(t)}(e,t.id)}},r.a.createElement("div",{onMouseDown:function(e){return l(e.nativeEvent.offsetX)},onClick:function(){return N(!S)},className:"project"},t.title),r.a.createElement("div",{className:"resizer leftHandler"}),r.a.createElement("div",{className:"resizer rightHandler"})),S&&r.a.createElement("div",{style:{top:y+20,left:f-150},className:"editPopup"},r.a.createElement("div",{className:"buttonWrapper"},r.a.createElement("div",{className:"cyrcleStyle popup-".concat(t.type)}),r.a.createElement("button",{className:"btnEdit",onClick:function(){return W(!0)}},r.a.createElement("img",{src:Y.a,alt:"edit-icon"})),r.a.createElement("button",{className:"btnDelete",onClick:function(){return function(e,t,a){s(e,t,a),N(!1)}(o,c,i)}},r.a.createElement("img",{src:q.a,alt:"delete-icon"})),r.a.createElement("button",{className:"btnClose",onClick:function(){return N(!1)}},r.a.createElement("img",{className:"arrowIcon",src:R.a,alt:"close-icon"}))),P?r.a.createElement("div",{className:"popupTitle"},t.title):r.a.createElement(r.a.Fragment,null)))):null}function U(e){var t=e.handlerAddPopUp,a=e.workerInfo,o=e.addingInfo,c=Object(n.useState)((new Date).getTime()),i=Object(u.a)(c,2),s=i[0],l=i[1],d=Object(n.useState)((new Date).setDate((new Date).getDate()+1)),m=Object(u.a)(d,2),p=m[0],h=m[1],b=Object(n.useState)(""),g=Object(u.a)(b,2),v=g[0],y=g[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"PopUp"},r.a.createElement("div",{className:"popUpForm"},r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,"Event  "),r.a.createElement("img",{onClick:function(){return t(!1)},src:R.a,alt:"cross-icon"})),r.a.createElement("div",{className:"dates"},r.a.createElement("p",null,"Start from:"),r.a.createElement(f.a,{selected:s,onChange:function(e){return l(e.getTime())},selectsStart:!0,startDate:s,endDate:p,dateFormat:"MMMM d, yyyy"}),r.a.createElement("p",null,"End:"),r.a.createElement(f.a,{selected:p>s?p:s,onChange:function(e){return h(e.getTime())},selectsEnd:!0,startDate:s,endDate:p,minDate:s,dateFormat:"MMMM d, yyyy"})),r.a.createElement("p",null,"Enter Title:"),r.a.createElement("textarea",{required:!0,className:"textarea",type:"text",onChange:function(e){y(e.target.value)}}),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{onClick:function(){return o(a,s,p,v),void t(!1)},className:"submitBtn"},"submit"),r.a.createElement("button",{onClick:function(){return t(!1)},className:"cancelBtn"},"cancel"))),r.a.createElement("button",{className:"popUpBtn",onClick:function(){return t(!1)}},"qwdqw")))}function X(e){return e.map((function(e,t){return e.workers.map((function(e){return e.projects.reduce((function(t,a,n){if(!(e.projects.length<1)){0!==n&&t.forEach((function(e,t){e.positionY===a.positionY&&(a.positionX+a.duration<=e.positionX||e.positionX+e.duration<=a.positionX||(a.positionY=e.positionY+1))})),t.push(a);var r=t.sort((function(e,t){return t.positionY-e.positionY}))[0].positionY+1;return e.blockHeight=r,t}}),[])}))})),e}var F=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onDrop=n.onDrop.bind(Object(M.a)(n)),n.shouldAcceptDrop=n.shouldAcceptDrop.bind(Object(M.a)(n)),n.handlerAddPopUp=n.handlerAddPopUp.bind(Object(M.a)(n)),n.onDragEnter=n.onDragEnter.bind(Object(M.a)(n)),n.onDragEnd=n.onDragEnd.bind(Object(M.a)(n)),n.onDragLeave=n.onDragLeave.bind(Object(M.a)(n)),n.toggler=n.toggler.bind(Object(M.a)(n)),n.onDragStart=n.onDragStart.bind(Object(M.a)(n)),n.handleMouseMove=n.handleMouseMove.bind(Object(M.a)(n)),n.getInnerProjectOffset=n.getInnerProjectOffset.bind(Object(M.a)(n)),n.getDaysInRow=n.props.getDaysInRow,n.onDropReady=n.onDropReady.bind(Object(M.a)(n)),n.state={startDrag:!1,days:[],daysNumber:null,dayOffsetLeft:0,daysRowWidth:0,x:0,showAddPopUp:!1,workerInfo:[],board:n.props.board,innerProjectOffset:0,isEditing:!1},n}return Object(s.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.days!==this.props.days&&this.setState({days:e.days,daysNumber:e.days.length})}},{key:"toggler",value:function(e){var t=Object(N.a)(this.state.board);t[e]=Object(I.a)(Object(I.a)({},t[e]),{},{show:!t[e].show}),this.setState({board:t})}},{key:"handlerAddPopUp",value:function(e){this.setState({showAddPopUp:e})}},{key:"getWorkersId",value:function(e,t){this.setState({workerInfo:[e,t]}),this.handlerAddPopUp(!0)}},{key:"getInnerProjectOffset",value:function(e){this.setState({innerProjectOffset:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.showAddPopUp&&r.a.createElement(U,{handlerAddPopUp:this.handlerAddPopUp,workerInfo:this.state.workerInfo,addingInfo:this.props.addingInfo}),this.state.board.map((function(t,a){return r.a.createElement("div",{key:t.departamentName+"-"+a},r.a.createElement(P,{departament:t,departamentID:a,toggler:e.toggler}),r.a.createElement("div",{className:"departmentBlock ".concat(t.show?"showDepartament":"hideDepartament")},t.workers.map((function(n,o){return r.a.createElement("div",{className:"dayRow",style:{height:"".concat(34*n.blockHeight,"px")},key:n.surname+"-dayRow-"+o},r.a.createElement("div",{className:"emploeesName"},r.a.createElement("p",{className:""},n.name," ",n.surname),r.a.createElement("button",{onClick:function(){return e.getWorkersId(a,o)}},r.a.createElement("img",{src:R.a,alt:"plus-icon"}))),r.a.createElement("div",{style:{width:e.props.rowWidth,height:"".concat(34*n.blockHeight,"px")},id:"inside",className:"day",onMouseMove:e.handleMouseMove},r.a.createElement(x.Container,{className:"thisIsContainer",style:{position:"relative",height:"".concat(34*n.blockHeight,"px")},behaviour:"drop-zone",onDrop:function(t){return e.onDrop(t,a,o,e.props.cellWidth)},shouldAcceptDrop:function(t,n){return e.shouldAcceptDrop(n,a,o)},getChildPayload:function(e){return t.workers[o].projects[e]},onDragLeave:function(){return e.onDragLeave(a,o)},animationDuration:"none",onDragStart:function(t){return e.onDragStart(t,a,o)},onDragEnd:function(t){return e.onDragEnd(t,a,o,e.props.cellWidth)}},n.projects.map((function(t,n){return r.a.createElement(B,{key:"piece "+n,pieceIndex:n,rowIndex:o,departamentID:a,deleteProject:e.props.deleteProject,board:e.props.board,piece:t,cellWidth:e.props.cellWidth,setSomeData:e.props.setSomeData,getInnerProjectOffset:e.getInnerProjectOffset})})))))}))))})))}},{key:"componentDidMount",value:function(){var e=document.getElementById("inside").offsetLeft;this.setState({dayOffsetLeft:e})}},{key:"shouldAcceptDrop",value:function(e,t,a,n){return!0}},{key:"onDrop",value:function(e,t,a,n){var r=e.addedIndex,o=e.removedIndex,c=e.payload,i=Object.assign({},c);i.positionX=Math.round(this.state.x/n)-1,i.positionY=0,null===r&&null===o||(null!==o&&this.state.board[t].workers[a].projects.splice(o,1),null!==r&&this.state.board[t].workers[a].projects.push(i),this.setState({startDrag:!1,board:X(this.state.board)})),this.getInnerProjectOffset(0),this.forceUpdate()}},{key:"handleMouseMove",value:function(e){this.state.startDrag&&(console.log(this.state.innerProjectOffset),this.setState({x:e.nativeEvent.x-this.state.dayOffsetLeft-this.state.innerProjectOffset}))}},{key:"onDragStart",value:function(e,t,a){this.setState({startDrag:!0})}},{key:"onDragEnter",value:function(e,t,a){}},{key:"onDragEnd",value:function(e,t,a){}},{key:"onDropReady",value:function(e){}},{key:"onDragLeave",value:function(e,t,a){}}]),a}(n.Component);F.defaultProps={};var T=F,z=[{departamentName:"BACKEND",show:!0,workers:[{id:"back-1",name:"Leonid",surname:"Bondar",department:"back",blockHeight:1,projects:[{positionX:0,positionY:0,id:"back-1-1",title:"Startup",projStart:"Aug 15 2020",duration:2,type:"main"},{positionX:1,positionY:0,id:"back-2-1",title:"Startup",projStart:"Aug 15 2020",duration:2,type:"main"}]},{id:"back-2",name:"Boris",surname:"Koval",department:"back",blockHeight:1,projects:[]},{id:"back-3",name:"Afanasy",surname:"Marchenko",department:"back",blockHeight:1,projects:[]},{id:"back-4",name:"Artur",surname:"Rudenko",department:"back",blockHeight:1,projects:[{positionX:2,positionY:0,id:"back-4-1",title:"Manifest",projStart:"Aug 19 2020",duration:4,type:"education"}]},{id:"back-5",name:"Mikhail",surname:"Petrenko",department:"back",blockHeight:1,projects:[]}]},{departamentName:"QA",show:!0,workers:[{id:"qa-1",name:"Leonid",surname:"Bondar",department:"qa",blockHeight:1,projects:[{positionX:1,positionY:0,id:"qa-1-1",title:"Startup 1",projStart:"Aug 15 2020",duration:2,type:"main"},{positionX:3,positionY:0,id:"qa-1-2",title:"Startup 2",projStart:"Aug 15 2020",duration:2,type:"main"}]},{id:"qa-2",name:"Boris",surname:"Koval",department:"qa",blockHeight:1,projects:[]},{id:"qa-3",name:"Afanasy",surname:"Marchenko",department:"qa",blockHeight:1,projects:[]},{id:"qa-4",name:"Artur",surname:"Rudenko",department:"qa",blockHeight:1,projects:[]}]}];function K(e){var t=e.daysInRow,a=e.rowWidth,o=Object(n.useState)(z),c=Object(u.a)(o,2),i=c[0],s=(c[1],a/t.length),l=Object(n.useState)(X(z)),d=Object(u.a)(l,2),m=(d[0],d[1]),p=A()();var h=document.querySelectorAll(".handlers"),f=document.querySelectorAll(".resizer");return Object(n.useEffect)((function(){for(var e=0;e<f.length;e++){var t=f[e];console.log("CalculateData resizer"),t.addEventListener("mouseover",(function(){Object(N.a)(h).map((function(e){return e.classList.remove("smooth-dnd-draggable-wrapper")}))})),t.addEventListener("mouseout",(function(){Object(N.a)(h).map((function(e){return e.classList.add("smooth-dnd-draggable-wrapper")}))}))}}),[f]),console.log(i),r.a.createElement(T,{days:t,cellWidth:s,board:i,deleteProject:function(e,t,a){console.log("deleteProject",e,t,a),i[a].workers[t].projects.splice(e,1),p()},rowWidth:a,setSomeData:m,addingInfo:function(e,t,a,n){var r=Math.round((a-t)/864e5),o=Object(u.a)(e,2),c=o[0],s=o[1];console.log("addingInfo",c,s,t,a,n),i[c].workers[s].projects.push({positionX:1,positionY:0,id:"qa-1-5",title:n,projStart:"Aug 15 2020",duration:r,type:"main"}),console.log(i)}})}var J=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getDaysInRow=function(e){n.setState({daysInRow:e})},n.getRowWidth=function(e){n.setState({rowWidth:e})},n.state={daysInRow:[],rowWidth:null},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"System container-fluid"},r.a.createElement(O,{getDaysInRow:this.getDaysInRow,getRowWidth:this.getRowWidth}),r.a.createElement("div",{className:"AbsoluteSmooth"},r.a.createElement(K,{daysInRow:this.state.daysInRow,rowWidth:this.state.rowWidth}),this.state.daysInRow.reverse().map((function(t,a){return r.a.createElement(S,{key:"svgLines-".concat(t.date,"-").concat(t.month,"-").concat(a),index:a,cellWidth:e.state.rowWidth/e.state.daysInRow.length})})),r.a.createElement(S,{index:-1,cellWidth:this.state.rowWidth/this.state.daysInRow.length}))))}}]),a}(n.Component);var V=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},32:function(e,t,a){e.exports=a.p+"static/media/buttonLeft.e5208634.svg"},66:function(e,t,a){e.exports=a.p+"static/media/buttonRight.fb0a3ebd.svg"},70:function(e,t,a){e.exports=a.p+"static/media/delete.57657217.svg"},71:function(e,t,a){e.exports=a.p+"static/media/edit.2927f8de.svg"},72:function(e,t,a){e.exports=a(156)},78:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.ec3709f7.chunk.js.map