(this["webpackJsonpresource-planning"]=this["webpackJsonpresource-planning"]||[]).push([[0],{152:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),o=a(15),s=a.n(o),i=(a(72),a(73),a(27)),c=a(28),d=a(38),l=a(37),u=a(19),m=a(12),p=a.n(m),h=a(50),v=a.n(h);a(75);function f(e){var t=e.day,a=e.daysNumber;return r.a.createElement("div",{className:"day",style:{width:"".concat(100/a,"%")}},r.a.createElement("p",null,t.date),r.a.createElement("p",null,t.weekDay))}var y=a(63),g=a.n(y),b=a(30),w=a.n(b);var E=function(e){var t=e.nameOfClass,a=e.handler;return r.a.createElement("div",{className:t},r.a.createElement("button",{onClick:function(){return a(!1)}},r.a.createElement("img",{src:w.a,alt:"button-icon"})),e.children,r.a.createElement("button",{onClick:function(){return a(!0)}},r.a.createElement("img",{src:g.a,alt:"button-icon"})))},D=a(64);var k=function(e){var t=e.i,a=e.month,n=e.daysNumber;return r.a.createElement("div",{className:0===t?"month":"month borderLine",style:{width:"".concat(100/n*a.sum,"%")}},a.month)};var j=Object(D.withSize)()((function(e){var t=e.monthsView,a=e.getRowWidth,o=e.daysNumber,s=e.size;Object(n.useEffect)((function(){a(s.width)}),[a,s.width]);var i=t.map((function(e,t){return r.a.createElement(k,{i:t,key:"month-"+e.month+"-"+t,month:e,daysNumber:o})}));return r.a.createElement("div",{className:"months"},i)}));var O=function(e){var t=e.getDaysInRow,a=e.getRowWidth,o=Object(n.useState)(5),s=Object(u.a)(o,2),i=s[0],c=s[1],d=Object(n.useState)([]),l=Object(u.a)(d,2),m=l[0],h=l[1],y=Object(n.useState)([]),g=Object(u.a)(y,2),b=g[0],w=g[1],D=Object(n.useState)((new Date).getTime()),k=Object(u.a)(D,2),O=k[0],N=k[1],S=Object(n.useState)((new Date).setDate((new Date).getDate()+i)),R=Object(u.a)(S,2),L=R[0],M=R[1];return Object(n.useEffect)((function(){var e=Math.round((L-O)/864e5),a=e>21?21:e;0!==a&&c(a);for(var n=[],r=0;r<a+1;r++){var o=p()(O).add(1*r,"day").format("dd"),s=p()(O).add(1*r,"day").date(),i=p()(O).add(1*r,"day").format("MMMM"),d=p()(O).add(1*r,"day").year();n.push({id:o+"-"+s+"-"+i,weekDay:o,date:s,month:i,year:d,projects:{}})}var l=n.reduce((function(e,t){return e[t.month]=(e[t.month]||0)+1,e}),{}),u=Object.keys(l).map((function(e){return{month:e,sum:l[e]}}));h(n),w(u),t(n)}),[O,L,i,t]),r.a.createElement("div",{className:"DatePickerHeader container-fluid"},r.a.createElement("div",{className:"picker"},r.a.createElement("div",{className:"calendar"},r.a.createElement("div",{className:"dates"},r.a.createElement(v.a,{selected:O,onChange:function(e){return N(e.getTime())},selectsStart:!0,startDate:O,endDate:L,dateFormat:"MMMM d, yyyy"}),r.a.createElement(v.a,{selected:L>O?L:O,onChange:function(e){return M(e.getTime())},selectsEnd:!0,startDate:O,endDate:L,minDate:O,dateFormat:"MMMM d, yyyy"}),r.a.createElement("button",{id:"clearButton",onClick:function(){return N((new Date).getTime()),void M((new Date).setDate((new Date).getDate()+14))}},"Clear")))),r.a.createElement("div",{className:"datesShow"},r.a.createElement(E,{handler:function(e){var t,a;e?(t=p()(O).add(1,"month").format("x"),a=p()(L).add(1,"month").format("x")):(t=p()(O).subtract(1,"month").format("x"),a=p()(L).subtract(1,"month").format("x")),N(+t),M(+a)},nameOfClass:"months"},r.a.createElement(j,{monthsView:b,getRowWidth:a,daysNumber:i})),r.a.createElement(E,{handler:function(e){e?(N(O+864e5),M(L+864e5)):(N(O-864e5),M(L-864e5))},nameOfClass:"days"},m.map((function(e){return r.a.createElement(f,{key:"headerDate-"+e.date+"-"+e.i,day:e,daysNumber:i})})))))};function N(e){var t=e.index,a=e.cellWidth,n=t+1;return console.log("rerender Lines"),r.a.createElement("div",{className:"svgLines",style:{right:"".concat(a*n+20,"px")}},r.a.createElement("svg",{width:"1px",height:"100%",version:"1.1"},r.a.createElement("line",{x1:"0",y1:"100%",stroke:"black",fill:"transparent",strokeDasharray:"4",strokeWidth:"1"}),r.a.createElement("line",{x1:"100%",y1:"100%",stroke:"black",fill:"transparent",strokeDasharray:"4",strokeWidth:"1"})))}var S=a(53),R=a(24),L=a(6),M=a(35);function W(e){var t=e.departament,a=e.departamentID,n=e.toggler;return r.a.createElement("div",{className:"departmentTitle",key:"key-"+t.name+"-"+a},r.a.createElement("h5",null,t.departamentName),r.a.createElement("button",{onClick:function(){return n(a)},className:"departmentBtn"},r.a.createElement("img",{className:t.show?"show":"hide",src:w.a,alt:"arrow icon"})))}function x(e){for(var t=e.piece,a=(e.daysNumber,e.cellWidth),n=a||0,o=document.querySelectorAll(".handlers"),s=document.querySelectorAll(".rightHandler"),i=document.querySelectorAll(".leftHandler"),c=document.querySelectorAll(".resizer"),d=t.positionX*n,l=0;l<c.length;l++){var u=c[l];u.addEventListener("mouseover",(function(){Object(R.a)(o).map((function(e){return e.classList.remove("smooth-dnd-draggable-wrapper")}))})),u.addEventListener("mouseout",(function(){Object(R.a)(o).map((function(e){return e.classList.add("smooth-dnd-draggable-wrapper")}))}))}for(var m=function(e){var t=s[e];function a(a){t.classList.contains("rightHandler")&&(o[e].style.width=a.pageX-o[e].getBoundingClientRect().left+"px")}function n(){window.removeEventListener("mousemove",a),console.log("stopResize")}t.addEventListener("mousedown",(function(e){e.preventDefault(),window.addEventListener("mousemove",a),window.addEventListener("mouseup",n)}))},p=0;p<s.length;p++)m(p);for(var h=function(e){var t=i[e],n=0,r=0,s=0,c=a;function d(a){if(t.classList.contains("leftHandler")){var i=n-(a.pageX-r);i>c&&(o[e].style.width=i+"px",o[e].style.left=s+(a.pageX-r)+"px")}}function l(){window.removeEventListener("mousemove",d),console.log("stopResize")}t.addEventListener("mousedown",(function(t){t.preventDefault(),n=parseFloat(getComputedStyle(o[e],null).getPropertyValue("width").replace("px","")),s=parseFloat(getComputedStyle(o[e],null).getPropertyValue("left").replace("px","")),r=t.pageX,window.addEventListener("mousemove",d),window.addEventListener("mouseup",l)}))},v=0;v<i.length;v++)h(v);return t?r.a.createElement(M.Draggable,{id:"".concat(t.id,"-dragger"),className:"handlers",disabled:!0,style:{overflow:"visible",position:"absolute",left:d,width:n}},r.a.createElement("div",{className:" ".concat(t.type)},r.a.createElement("div",{className:"project"},t.title),r.a.createElement("div",{className:"resizer leftHandler"}),r.a.createElement("div",{className:"resizer rightHandler"}))):null}var C=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onDrop=n.onDrop.bind(Object(L.a)(n)),n.shouldAcceptDrop=n.shouldAcceptDrop.bind(Object(L.a)(n)),n.onDragEnter=n.onDragEnter.bind(Object(L.a)(n)),n.onDragEnd=n.onDragEnd.bind(Object(L.a)(n)),n.onDragLeave=n.onDragLeave.bind(Object(L.a)(n)),n.toggler=n.toggler.bind(Object(L.a)(n)),n.onDragStart=n.onDragStart.bind(Object(L.a)(n)),n.handleMouseMove=n.handleMouseMove.bind(Object(L.a)(n)),n.getDaysInRow=n.props.getDaysInRow,n.onDropReady=n.onDropReady.bind(Object(L.a)(n)),n.state={startDrag:!1,days:[],daysNumber:null,dayOffsetLeft:0,daysRowWidth:0,x:0,board:n.props.board},n}return Object(c.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.days!==this.props.days&&this.setState({days:e.days,daysNumber:e.days.length})}},{key:"toggler",value:function(e){var t=Object(R.a)(this.state.board);t[e]=Object(S.a)(Object(S.a)({},t[e]),{},{show:!t[e].show}),this.setState({board:t})}},{key:"render",value:function(){var e=this;return this.state.board.map((function(t,a){return r.a.createElement("div",{key:t.departamentName+"-"+a},r.a.createElement(W,{departament:t,departamentID:a,toggler:e.toggler}),r.a.createElement("div",{className:"departmentBlock ".concat(t.show?"showDepartament":"hideDepartament")},t.workers.map((function(n,o){return r.a.createElement("div",{className:"dayRow",key:n.surname+"-dayRow-"+o},r.a.createElement("p",{className:"emploeesName"},n.name," ",n.surname),r.a.createElement("div",{style:{width:e.props.rowWidth},id:"inside",className:"day",onMouseMove:e.handleMouseMove},r.a.createElement(M.Container,{className:"thisIsContainer",style:{position:"relative",height:"100%"},behaviour:"drop-zone",onDrop:function(t){return e.onDrop(t,a,o,e.props.cellWidth)},shouldAcceptDrop:function(t,n){return e.shouldAcceptDrop(n,a,o)},getChildPayload:function(e){return t.workers[o].projects[e]},onDragLeave:function(){return e.onDragLeave(a,o)},animationDuration:"none",dropClass:"dropClass",onDragStart:function(t){return e.onDragStart(t,a,o)},onDragEnd:function(t){return e.onDragEnd(t,a,o,e.props.cellWidth)}},n.projects.map((function(t,a){return r.a.createElement(x,{key:"piece "+a,daysNumber:e.state.daysNumber,piece:t,cellWidth:e.props.cellWidth})})))))}))))}))}},{key:"componentDidMount",value:function(){var e=document.getElementById("inside").offsetLeft;this.setState({dayOffsetLeft:e})}},{key:"shouldAcceptDrop",value:function(e,t,a,n){return!0}},{key:"onDrop",value:function(e,t,a,n){var r=e.addedIndex,o=e.removedIndex,s=e.payload,i=Object.assign({},s);i.positionX=Math.round(this.state.x/n)-1,null===r&&null===o||(null!==o&&this.state.board[t].workers[a].projects.splice(o,1),null!==r&&this.state.board[t].workers[a].projects.push(i),this.setState({startDrag:!1}),this.forceUpdate())}},{key:"handleMouseMove",value:function(e){this.state.startDrag&&this.setState({x:e.nativeEvent.x-this.state.dayOffsetLeft})}},{key:"onDragStart",value:function(e,t,a){this.setState({startDrag:!0})}},{key:"onDragEnter",value:function(e,t,a){}},{key:"onDragEnd",value:function(e,t,a){}},{key:"onDropReady",value:function(e){}},{key:"onDragLeave",value:function(e,t,a){}}]),a}(n.Component);C.defaultProps={};var I=C;function A(e){var t=e.daysInRow,a=e.rowWidth,n=a/t.length;return r.a.createElement(I,{days:t,cellWidth:n,board:[{departamentName:"BACKEND",show:!0,workers:[{id:"back-1",name:"Leonid",surname:"Bondar",department:"back",projects:[{positionX:0,positionY:1,id:"back-1-1",title:"Startup",projStart:"Aug 15 2020",duration:2,type:"main"}]},{id:"back-2",name:"Boris",surname:"Koval",department:"back",projects:[]},{id:"back-3",name:"Afanasy",surname:"Marchenko",department:"back",projects:[]},{id:"back-4",name:"Artur",surname:"Rudenko",department:"back",projects:[{positionX:2,positionY:1,id:"back-4-1",title:"Manifest",projStart:"Aug 19 2020",duration:4,type:"education"}]},{id:"back-5",name:"Mikhail",surname:"Petrenko",department:"back",projects:[]}]},{departamentName:"QA",show:!0,workers:[{id:"qa-1",name:"Leonid",surname:"Bondar",department:"qa",projects:[{positionX:1,positionY:1,id:"qa-1-1",title:"Startup 1",projStart:"Aug 15 2020",duration:2,type:"main"},{positionX:3,positionY:1,id:"qa-1-2",title:"Startup 2",projStart:"Aug 15 2020",duration:2,type:"main"}]},{id:"qa-2",name:"Boris",surname:"Koval",department:"qa",projects:[]},{id:"qa-3",name:"Afanasy",surname:"Marchenko",department:"qa",projects:[]},{id:"qa-4",name:"Artur",surname:"Rudenko",department:"qa",projects:[]}]}],rowWidth:a})}var q=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getDaysInRow=function(e){n.setState({daysInRow:e})},n.getRowWidth=function(e){n.setState({rowWidth:e})},n.state={daysInRow:[],rowWidth:null},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"System container-fluid"},r.a.createElement(O,{getDaysInRow:this.getDaysInRow,getRowWidth:this.getRowWidth}),r.a.createElement("div",{className:"AbsoluteSmooth"},r.a.createElement(A,{daysInRow:this.state.daysInRow,rowWidth:this.state.rowWidth}),this.state.daysInRow.reverse().map((function(t,a){return r.a.createElement(N,{key:"svgLines-".concat(t.date,"-").concat(t.month,"-").concat(a),index:a,cellWidth:e.state.rowWidth/e.state.daysInRow.length})})),r.a.createElement(N,{index:-1,cellWidth:this.state.rowWidth/this.state.daysInRow.length}))))}}]),a}(n.Component);var B=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},30:function(e,t,a){e.exports=a.p+"static/media/buttonLeft.e5208634.svg"},63:function(e,t,a){e.exports=a.p+"static/media/buttonRight.fb0a3ebd.svg"},67:function(e,t,a){e.exports=a(152)},73:function(e,t,a){}},[[67,1,2]]]);
//# sourceMappingURL=main.0700bf3d.chunk.js.map